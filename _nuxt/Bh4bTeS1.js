import{x,Q as C,aA as I,az as W,B as L,l as S,g as b,G as E,r as O}from"./Th3dfjss.js";function v(e){return I()?(W(e),!0):!1}function h(e){return typeof e=="function"?e():L(e)}const P=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const T=e=>e!=null,_=Object.prototype.toString,k=e=>_.call(e)==="[object Object]",y=()=>{};function B(e){return S()}function G(e,t=!0,n){B()?x(e,n):t?e():C(e)}const M=P?window:void 0;function m(e){var t;const n=h(e);return(t=n==null?void 0:n.$el)!=null?t:n}function N(...e){let t,n,r,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,u]=e,t=M):[t,n,r,u]=e,!t)return y;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const a=[],i=()=>{a.forEach(o=>o()),a.length=0},l=(o,s,g,d)=>(o.addEventListener(s,g,d),()=>o.removeEventListener(s,g,d)),f=b(()=>[m(t),h(u)],([o,s])=>{if(i(),!o)return;const g=k(s)?{...s}:s;a.push(...n.flatMap(d=>r.map(c=>l(o,d,c,g))))},{immediate:!0,flush:"post"}),p=()=>{f(),i()};return v(p),p}function D(){const e=O(!1),t=S();return t&&x(()=>{e.value=!0},t),e}function R(e){const t=D();return E(()=>(t.value,!!e()))}function V(e,t,n={}){const{root:r,rootMargin:u="0px",threshold:a=0,window:i=M,immediate:l=!0}=n,f=R(()=>i&&"IntersectionObserver"in i),p=E(()=>{const c=h(e);return(Array.isArray(c)?c:[c]).map(m).filter(T)});let o=y;const s=O(l),g=f.value?b(()=>[p.value,m(r),s.value],([c,j])=>{if(o(),!s.value||!c.length)return;const w=new IntersectionObserver(t,{root:m(j),rootMargin:u,threshold:a});c.forEach(A=>A&&w.observe(A)),o=()=>{w.disconnect(),o=y}},{immediate:l,flush:"post"}):y,d=()=>{o(),g(),s.value=!1};return v(d),{isSupported:f,isActive:s,pause(){o(),s.value=!1},resume(){s.value=!0},stop:d}}function z(e){let t;return new Promise(n=>{t=V(e,r=>{for(const u of r)u.isIntersecting&&n(!0)},{rootMargin:"30px 0px 0px 0px",threshold:0}),v(()=>n(!1))}).finally(()=>{t.stop()})}function $(e){const{el:t,trigger:n}=e,r=(Array.isArray(e.trigger)?e.trigger:[e.trigger]).filter(Boolean);if(!n||r.includes("immediate")||r.includes("onNuxtReady"))return"onNuxtReady";if(r.some(i=>["visibility","visible"].includes(i)))return t?z(t):new Promise(()=>{});const u={},a=new Promise(i=>{const l=typeof t<"u"?t:document.body,f=N(l,r,()=>{f(),i(!0)},{once:!0,passive:!0});G(()=>{b(l,p=>{p&&r.forEach(o=>{p.dataset[`script_${o}`]&&(f(),i(!0))})},{immediate:!0})}),v(()=>i(!1))});return Object.assign(a,{ssrAttrs:u})}export{$ as u};
